<!DOCTYPE html>
<html>
    <head>
        <title>Oscilloscope</title>
        <style>
            .canvas {
                margin: 0 auto;
                display: block;
                border: 1px solid grey;
            }
        </style>
    </head>
    <body>
        <canvas
            id="OscilloscopeCanvas"
            class="canvas"
            width="1600"
            height="900"
            ></canvas>
        <script>
            const ctx = OscilloscopeCanvas.getContext("2d");
            OscilloscopeCanvas.width = window.innerWidth * 0.95;
            OscilloscopeCanvas.height = window.innerHeight * 0.95;
            ctx.width = OscilloscopeCanvas.width;
            ctx.height = OscilloscopeCanvas.height;
            const LineLength = ctx.height / 12;
            const wipe = function () {
                ctx.fillStyle = "rgb(0, 0, 0)";
                ctx.fillRect(0,0, ctx.width, ctx.height);
            };
            ctx.x = ctx.width / 2;
            ctx.y = ctx.height / 2;
            const drawLine = (x1, y1, x2, y2) => {
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.strokeStyle = 'rgb(0, 255, 0)';
                ctx.lineTo(x2, y2);
                ctx.stroke();
                ctx.closePath();
            }
            const drawPoint = (x, y) => {
                drawLine(x, y, x + 1, y + 1);
            }
            const Params = {
                xPi: 2,
                yPi: 2,
                xFunc: 'cos',
                yFunc: 'sin',
                Frequency: 500,
                clearCanvas: true,
                LineLength: LineLength * 2.5,
                xCenter: ctx.x,
                yCenter: ctx.y,
                FramesToSkip: 0,
                Phase: 1,
            };
            const drawRandomPoint = () => {
                var ss = Math.random();
                drawPoint(
                    Math.floor(
                        Params.xCenter + Params.LineLength * (
                            Math[Params.xFunc](ss * Math.PI * Params.xPi)
                        )
                    ),
                    Math.floor(
                        Params.yCenter + Params.LineLength * (
                            Math[Params.yFunc](ss * Math.PI * Params.yPi * Params.Phase)
                        )
                    )
                );
            }
            const runFrame = () => {
                drawRandomPoint();
            }
            const startRandomFilling = function () {
                if (startRandomFilling.skippedFrames >= Params.FramesToSkip) {
                    if (Params.clearCanvas === true) {
                        wipe();
                    }
                    for (let i = 0; i < Params.Frequency; i++) {
                      runFrame();
                    }
                    startRandomFilling.skippedFrames = 0;
                } else {
                    startRandomFilling.skippedFrames += 1;
                }
                requestAnimationFrame(startRandomFilling);
            }
            startRandomFilling.skippedFrames = 0;
            startRandomFilling();
        </script>
    </body>
</html>